<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WebServiceClientG2.UI.Pages.MainPage"
			 xmlns:local="clr-namespace:WebServiceClientG2.UI.ViewModels"
			 x:DataType="local:MainViewModel">
	<Grid RowDefinitions="*,Auto" ColumnDefinitions="150,*" Padding="10">
		<!-- CollectionView (Left Sidebar) -->
		<CollectionView Grid.Row="0" Grid.Column="0"
                        ItemsSource="{Binding Tabs}"
                        SelectedItem="{Binding SelectedTab, Mode=TwoWay}"
                        SelectionMode="Single"
                        BackgroundColor="LightGray">
			<CollectionView.ItemTemplate>
				<DataTemplate>
					<StackLayout Padding="10">
						<Label Text="{Binding Name}" 
                               FontSize="18"
                               TextColor="{Binding IsSelected, Converter={StaticResource SelectedTabColorConverter}}"
                               HorizontalOptions="Start"/>
					</StackLayout>
				</DataTemplate>
			</CollectionView.ItemTemplate>
		</CollectionView>

		<!-- Tab Content (Right Side) -->
		<ContentView Grid.Row="0" Grid.Column="1" 
                     x:Name="TabContent" 
                     Content="{Binding CurrentTabContent}"
                     Margin="10,0,0,0"/>

		<!-- Console (Bottom) -->
		<Border Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" 
                Padding="10" Margin="0,10">
			<StackLayout>
				<Label Text="Konzola" FontSize="16" FontAttributes="Bold"/>
				<ScrollView x:Name="ConsoleScrollView" HeightRequest="350">
					<Editor x:Name="ConsoleEditor"
                            Text="{Binding ConsoleText}"
                            IsReadOnly="True"
                            BackgroundColor="Black"
                            AutoSize="TextChanges"
                            TextChanged="ConsoleEditor_TextChanged"/>
				</ScrollView>
			</StackLayout>
		</Border>
	</Grid>
</ContentPage>